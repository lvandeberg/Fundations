<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Letter Tray</title>

  <style>
    :root{
      --bg:#f7f8fb;
      --card:#ffffff;
      --border:#cfd6df;
      --border2:#d6dde6;
      --active:#7aa7ff;
      --shadow:0 2px 10px rgba(0,0,0,.06);
      --tile:68px;
      --gap:10px;
      --radius:16px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#1f2937;
    }

    body{ margin:0; background:var(--bg); }
    header{
      padding:14px 18px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:var(--card);
      border-bottom:1px solid var(--border2);
      position:sticky;
      top:0;
      z-index:10;
    }
    h1{ margin:0; font-size:16px; font-weight:650; }

    .btnRow{ display:flex; gap:10px; align-items:center; }
    button{
      padding:8px 14px;
      border-radius:10px;
      border:1px solid var(--border);
      background:var(--card);
      cursor:pointer;
      font-size:13px;
      box-shadow:var(--shadow);
    }

    main{
      padding:18px;
      max-width:1200px;
      margin:0 auto;
    }

    .sectionTitle{
      margin:0 0 10px 0;
      font-size:14px;
      font-weight:650;
    }
    .hint{
      font-size:12px;
      color:#6b7280;
      margin:4px 0 0 0;
    }

    .dropzone{
      background:var(--card);
      border:2px dashed var(--border);
      border-radius:var(--radius);
      padding:12px;
      min-height:120px;
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(var(--tile), var(--tile)));
      grid-auto-rows: var(--tile);
      gap: var(--gap);
      align-content:start;
      justify-content:start;
    }

    .dropzone.active{
      background:#f2f6ff;
      border-color:var(--active);
    }

    .tray{
      border-style:solid;
      border-width:2px;
    }

    .layout{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1fr;
      gap:16px;
    }

    @media (min-width: 900px){
      .layout{ grid-template-columns: 1fr 1fr; }
    }

    .tile{
      width:var(--tile);
      height:var(--tile);
      border-radius:14px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:26px;
      font-weight:750;
      user-select:none;
      border:1px solid var(--border);
      box-shadow:0 1px 6px rgba(0,0,0,.08);
      cursor:grab;
      position:relative;
    }
    .tile:active{ cursor:grabbing; }

    .tile.template::after{
      content:"";
      position:absolute;
      width:10px;
      height:10px;
      border-radius:999px;
      background:rgba(31,41,55,.25);
      top:8px;
      right:8px;
    }

    /* COLORS */
    .vowel{ background:#f7c6c7; }
    .consonant{ background:#f9efc7; }
    .blend{ background:#f9efc7; }
    .ending{ background:#cfe9d6; }
  </style>
</head>

<body>
<div id="fsWrap">
<header>
  <h1>Letter Tray</h1>
  <div class="btnRow">
    <button id="fullscreenBtn">Full screen</button>
    <button id="clearWorkBtn">Clear workspace</button>
  </div>
</header>

<main>
  <section>
    <p class="sectionTitle">Tray (alphabetical order)</p>
    <p class="hint">Drag from the tray to create tiles. Drop tiles back here to remove them.</p>
    <div class="dropzone tray" id="tray"></div>
  </section>

  <div class="layout">
    <section>
      <p class="sectionTitle">Build words</p>
      <div class="dropzone workzone"></div>
    </section>
    <section>
      <p class="sectionTitle">Break apart</p>
      <div class="dropzone workzone"></div>
    </section>
  </div>

  <section style="margin-top:16px;">
    <p class="sectionTitle">Extra workspace</p>
    <div class="dropzone workzone"></div>
  </section>
</main>
</div>

<script>
const TILE_DATA = [
  // LETTERS (alphabetical, q shown as qu)
  { id:"a", text:"a", type:"vowel" },
  { id:"b", text:"b", type:"consonant" },
  { id:"c", text:"c", type:"consonant" },
  { id:"d", text:"d", type:"consonant" },
  { id:"e", text:"e", type:"vowel" },
  { id:"f", text:"f", type:"consonant" },
  { id:"g", text:"g", type:"consonant" },
  { id:"h", text:"h", type:"consonant" },
  { id:"i", text:"i", type:"vowel" },
  { id:"j", text:"j", type:"consonant" },
  { id:"k", text:"k", type:"consonant" },
  { id:"l", text:"l", type:"consonant" },
  { id:"m", text:"m", type:"consonant" },
  { id:"n", text:"n", type:"consonant" },
  { id:"o", text:"o", type:"vowel" },
  { id:"p", text:"p", type:"consonant" },
  { id:"qu", text:"qu", type:"consonant" },
  { id:"r", text:"r", type:"consonant" },
  { id:"s", text:"s", type:"consonant" },
  { id:"t", text:"t", type:"consonant" },
  { id:"u", text:"u", type:"vowel" },
  { id:"v", text:"v", type:"consonant" },
  { id:"w", text:"w", type:"consonant" },
  { id:"x", text:"x", type:"consonant" },
  { id:"y", text:"y", type:"consonant" },
  { id:"z", text:"z", type:"consonant" },

  // BLENDS (after letters)
  { id:"ch", text:"ch", type:"blend" },
  { id:"sh", text:"sh", type:"blend" },
  { id:"th", text:"th", type:"blend" },
  { id:"wh", text:"wh", type:"blend" },
  { id:"ck", text:"ck", type:"blend" },

  // ENDINGS (green, at end)
  { id:"all", text:"all", type:"ending" },
  { id:"an", text:"an", type:"ending" },
  { id:"am", text:"am", type:"ending" },
  { id:"ang", text:"ang", type:"ending" },
  { id:"ing", text:"ing", type:"ending" },
  { id:"ong", text:"ong", type:"ending" },
  { id:"ung", text:"ung", type:"ending" },
  { id:"ank", text:"ank", type:"ending" },
  { id:"ink", text:"ink", type:"ending" },
  { id:"onk", text:"onk", type:"ending" },
  { id:"unk", text:"unk", type:"ending" }
];

const tray = document.getElementById("tray");
const workZones = Array.from(document.querySelectorAll(".workzone"));
const allZones = [tray, ...workZones];

let draggedEl = null;
const defById = new Map(TILE_DATA.map(t => [t.id, t]));

function uid(){
  return "tile_" + Math.random().toString(16).slice(2);
}

function makeTile(def, template){
  const el = document.createElement("div");
  el.className = `tile ${def.type}` + (template ? " template" : "");
  el.textContent = def.text;
  el.draggable = true;
  el.dataset.tileId = def.id;
  el.dataset.template = template ? "1" : "0";
  if(!template) el.dataset.instanceId = uid();

  el.addEventListener("click", () => {
    if(el.dataset.template === "1") return;
    el.remove();
  });

  el.addEventListener("dragstart", e => {
    draggedEl = el;
    const payload = {
      kind: el.dataset.template === "1" ? "template" : "instance",
      tileId: def.id
    };
    e.dataTransfer.setData("text/plain", JSON.stringify(payload));
  });

  el.addEventListener("dragend", () => {
    draggedEl = null;
    allZones.forEach(z => z.classList.remove("active"));
  });

  return el;
}

TILE_DATA.forEach(def => tray.appendChild(makeTile(def, true)));

allZones.forEach(zone => {
  zone.addEventListener("dragover", e => {
    e.preventDefault();
    zone.classList.add("active");
  });

  zone.addEventListener("dragleave", () => zone.classList.remove("active"));

  zone.addEventListener("drop", e => {
    e.preventDefault();
    zone.classList.remove("active");

    const payload = JSON.parse(e.dataTransfer.getData("text/plain"));
    if(zone === tray){
      if(draggedEl && draggedEl.dataset.template === "0") draggedEl.remove();
      return;
    }

    if(payload.kind === "template"){
      const def = defById.get(payload.tileId);
      zone.appendChild(makeTile(def, false));
    } else if(draggedEl){
      zone.appendChild(draggedEl);
    }
  });
});

document.getElementById("clearWorkBtn").addEventListener("click", () => {
  workZones.forEach(z => z.innerHTML = "");
});

const fsBtn = document.getElementById("fullscreenBtn");
const fsWrap = document.getElementById("fsWrap");

fsBtn.addEventListener("click", () => {
  if(!document.fullscreenElement) fsWrap.requestFullscreen();
  else document.exitFullscreen();
});
</script>
</body>
</html>
